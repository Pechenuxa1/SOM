# SOM

### Инструкция по развертыванию

# Конфигурационные файлы
1. в файле .env можно поменять адрес и учетные данные для подключения к базе данных
2. в файле docker-compose.yml можно поменять конфигурацию Docker-контейнеров
3. в файле nginx.conf можно настроить конфигурацию nginx

# Запуск программной системы осуществляется следующим образом:
1. запустить ПО Docker;
2. открыть терминал по пути корневой директории проекта “Som”;
3. ввести в терминале команду “docker compose up -d” для развертывания
веб-приложения, базы данных и веб-сервера nginx;
4. ввести команду “docker ps” и убедиться в появлении четырех
Docker-контейнеров; 
5. ввести в командной строке команду “docker exec -it som-backend bash”для входа в контейнер сервера;
6. ввести в открывшемся приглашении командной строки “alembic upgrade 
head” для создания таблиц в базе данных;
7. выйти с помощью команды “exit”
8. в поисковой строке браузера написать “http://localhost”


### Инструкция по использованию

Чтобы создать новое обследование нажмите кнопку "Добавить обследование". В появившемся окне добавьте собранные на данный момент
файлы обследований.
# ВАЖНО!!!
1. Обязательно добавьте файл опросников в формате .xlsx со столбцом "subj_id", где перечислены все или часть идентификаторов 
участников обследований. Опционально можно добавить столбцы "sex", "foreign", "birth_date", а также столбцы с результатами 
психологических тестов в формате {тест}_{номер вопроса}. Например, bdi_1, sp_before_2, st_3, sp_after_4, gld_5, sfa_6, scs_7.
Во вкладке "Участники" будет информация про пол, дату рождения и гражданство. Во вкладках "Опросники" будет информация о наличии
каждого конкретного теста для участника, а в "Обследования" - всех тестов.

2. Остальные файлы добавляются опционально

3. При добавлении файла с результатами поведенческого теста HUNT в формате .xlsx, он также должен иметь столбец "subj_id", в 
котором перечислены все или часть идентификаторов участников из файла с опросниками. Во вкладках "Hunt" и "Обследования" будет 
информация о наличии теста для каждого участника.

4. При добавлении файлов конкретных форматов их названия должны содержать subj_id конкретного участника (например, Som_N_001.ecg 
или Som_N_001_v1.ecg). Во вкладке "Обследования" и "Файлы" будет храниться информация о наличии каждого файла для участника.

5. При добавлении общих файлов они привязываются к обследованию, а не к участникам и их можно именовать произвольно. Скачать их 
можно на вкладке "Общие файлы".

Для скачивания файлов обследования необходимо нажать кнопку "Скачать" и в появившемся окне выбрать нужные файлы. Файлы будут 
скачаны в zip-архиве.

Чтобы добавить новые файлы для обследования нужно нажать кнопку "Редактировать". При добавлении новых участников или результатов 
обследований в файлы опросников и Hunt, все эти данные сохранятся и обновятся во вкладках "Участники", "Обследования", "Hunt", 
"Опросники". При добавлении уже существующих файлов обследований конкретных людей, старые файлы заменятся новыми.

При нажатии на кнопку "Показать сначала отсутствующие данные" сначала будут показаны участники с наименьшим количеством результатов 
обследований.

